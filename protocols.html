<!doctype html>
<html class="no-js" lang="en" data-content_root="./">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="index" title="Index" href="genindex.html" /><link rel="search" title="Search" href="search.html" /><link rel="next" title="Measurements" href="measurements.html" /><link rel="prev" title="Online - Projects" href="projects.html" />

    <link rel="shortcut icon" href="_static/favicon.png"/><!-- Generated with Sphinx 8.1.3 and Furo 2024.08.06 -->
        <title>Protocols - JII - MultispeQ</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?v=354aac6f" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?v=302659d7" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  @media not print {
    body[data-theme="dark"] {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
    @media (prefers-color-scheme: dark) {
      body:not([data-theme="light"]) {
        --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
      }
    }
  }
</style></head>
  <body>
    
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    

<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024">
      <path d="M408 442h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8zm-8 204c0 4.4 3.6 8 8 8h480c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8H408c-4.4 0-8 3.6-8 8v56zm504-486H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zm0 632H120c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h784c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM115.4 518.9L271.7 642c5.8 4.6 14.4.5 14.4-6.9V388.9c0-7.4-8.5-11.5-14.4-6.9L115.4 505.1a8.74 8.74 0 0 0 0 13.8z"/>
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-with-moon" viewBox="0 0 24 24">
    <title>Auto light/dark, in light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path style="opacity: 50%" d="M 5.411 14.504 C 5.471 14.504 5.532 14.504 5.591 14.504 C 3.639 16.319 4.383 19.569 6.931 20.352 C 7.693 20.586 8.512 20.551 9.25 20.252 C 8.023 23.207 4.056 23.725 2.11 21.184 C 0.166 18.642 1.702 14.949 4.874 14.536 C 5.051 14.512 5.231 14.5 5.411 14.5 L 5.411 14.504 Z"/>
      <line x1="14.5" y1="3.25" x2="14.5" y2="1.25"/>
      <line x1="14.5" y1="15.85" x2="14.5" y2="17.85"/>
      <line x1="10.044" y1="5.094" x2="8.63" y2="3.68"/>
      <line x1="19" y1="14.05" x2="20.414" y2="15.464"/>
      <line x1="8.2" y1="9.55" x2="6.2" y2="9.55"/>
      <line x1="20.8" y1="9.55" x2="22.8" y2="9.55"/>
      <line x1="10.044" y1="14.006" x2="8.63" y2="15.42"/>
      <line x1="19" y1="5.05" x2="20.414" y2="3.636"/>
      <circle cx="14.5" cy="9.55" r="3.6"/>
    </svg>
  </symbol>
  <symbol id="svg-moon-with-sun" viewBox="0 0 24 24">
    <title>Auto light/dark, in dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round"
      class="icon-custom-derived-from-feather-sun-and-tabler-moon">
      <path d="M 8.282 7.007 C 8.385 7.007 8.494 7.007 8.595 7.007 C 5.18 10.184 6.481 15.869 10.942 17.24 C 12.275 17.648 13.706 17.589 15 17.066 C 12.851 22.236 5.91 23.143 2.505 18.696 C -0.897 14.249 1.791 7.786 7.342 7.063 C 7.652 7.021 7.965 7 8.282 7 L 8.282 7.007 Z"/>
      <line style="opacity: 50%" x1="18" y1="3.705" x2="18" y2="2.5"/>
      <line style="opacity: 50%" x1="18" y1="11.295" x2="18" y2="12.5"/>
      <line style="opacity: 50%" x1="15.316" y1="4.816" x2="14.464" y2="3.964"/>
      <line style="opacity: 50%" x1="20.711" y1="10.212" x2="21.563" y2="11.063"/>
      <line style="opacity: 50%" x1="14.205" y1="7.5" x2="13.001" y2="7.5"/>
      <line style="opacity: 50%" x1="21.795" y1="7.5" x2="23" y2="7.5"/>
      <line style="opacity: 50%" x1="15.316" y1="10.184" x2="14.464" y2="11.036"/>
      <line style="opacity: 50%" x1="20.711" y1="4.789" x2="21.563" y2="3.937"/>
      <circle style="opacity: 50%" cx="18" cy="7.5" r="2.169"/>
    </svg>
  </symbol>
  <symbol id="svg-pencil" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-pencil-code">
      <path d="M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4" />
      <path d="M13.5 6.5l4 4" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
  <symbol id="svg-eye" viewBox="0 0 24 24">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-eye-code">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M10 12a2 2 0 1 0 4 0a2 2 0 0 0 -4 0" />
      <path
        d="M11.11 17.958c-3.209 -.307 -5.91 -2.293 -8.11 -5.958c2.4 -4 5.4 -6 9 -6c3.6 0 6.6 2 9 6c-.21 .352 -.427 .688 -.647 1.008" />
      <path d="M20 21l2 -2l-2 -2" />
      <path d="M17 17l-2 2l2 2" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>

<a class="skip-to-content muted-link" href="#furo-main-content">Skip to content</a>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">JII - MultispeQ</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
          <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  <div class="sidebar-logo-container">
    <img class="sidebar-logo" src="_static/jan-ingenhousz-institute-logo.webp" alt="Logo"/>
  </div>
  
  <span class="sidebar-brand-text">JII - MultispeQ</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder="Search" name="q" aria-label="Search">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="install.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting-started.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="projects.html">Online - Projects</a></li>
<li class="toctree-l1 current current-page"><a class="current reference internal" href="#">Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="measurements.html">Measurements</a></li>
<li class="toctree-l1"><a class="reference internal" href="porting.html">Code Porting</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Modules</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="modules/device.html">Device</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/protocol.html">Protocol</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/measurement.html">Measurement</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/project.html">Project</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/analysis.html">Analysis</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference external" href="https://www.jan-ingenhousz-institute.org">Jan Ingenhousz Institute</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/Jan-IngenHousz-Institute">GitHub</a></li>
</ul>

</div>
</div>

      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <a href="#" class="back-to-top muted-link">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
            <path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8v12z"></path>
          </svg>
          <span>Back to top</span>
        </a>
        <div class="content-icon-container">
          <div class="view-this-page">
  <a class="muted-link" href="_sources/protocols.rst.txt" title="View this page">
    <svg><use href="#svg-eye"></use></svg>
    <span class="visually-hidden">View this page</span>
  </a>
</div>
<div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto-light"><use href="#svg-sun-with-moon"></use></svg>
              <svg class="theme-icon-when-auto-dark"><use href="#svg-moon-with-sun"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main" id="furo-main-content">
          <section id="protocols">
<h1>Protocols<a class="headerlink" href="#protocols" title="Link to this heading">¶</a></h1>
<p>If you have successfully downloaded the <strong>data</strong> and <strong>information</strong> for a Project you can now access the Protocol
used with the MultispeQ as well.</p>
<p>When you look at the Protoject’s information in it’s raw format, you will notice, the dictionary has two keys related
to the Protocols. It is important to understand the difference before working with them.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">protocols</span></code> contains a list with the protocols associated with the Project. It contains detailed information like the
Protocol’s name, its author, the actual code, the macro to analyze the raw output, and much more.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">protocol_json</span></code> is on the same level as <code class="docutils literal notranslate"><span class="pre">protocols</span></code> and contains the actual protocol code sent to the MultispeQ.</p></li>
</ul>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>Since <code class="docutils literal notranslate"><span class="pre">protocol_json</span></code> contains the actual code sent to the MultispeQ, it is strongly recommended to use for the
analysis as well. All the functions described below use this protocol code.</p>
</div>
<section id="multispeq-protocols">
<h2>MultispeQ Protocols<a class="headerlink" href="#multispeq-protocols" title="Link to this heading">¶</a></h2>
<p>The code below is a recap from the previous example on how to access the protocol name and code.</p>
<div class="literal-block-wrapper docutils container" id="protocol-data-tutorial-0">
<div class="code-block-caption"><span class="caption-text"><em>Example:</em> Get the protocol from the project information</span><a class="headerlink" href="#protocol-data-tutorial-0" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">jii_multispeq.project</span> <span class="k">as</span> <span class="nn">project</span>
<span class="kn">import</span> <span class="nn">jii_multispeq.protocol</span> <span class="k">as</span> <span class="nn">protocol</span>

<span class="n">projectId</span> <span class="o">=</span> <span class="mi">29652</span>

<span class="c1">## Get the project data and information</span>
<span class="hll"><span class="n">df</span><span class="p">,</span> <span class="n">info</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">projectId</span><span class="o">=</span><span class="n">projectId</span><span class="p">)</span>
</span>
<span class="c1">## Get Protocol Name</span>
<span class="n">protocol_name</span> <span class="o">=</span>  <span class="n">protocol</span><span class="o">.</span><span class="n">get_protocol_name</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">protocol_name</span><span class="p">)</span>

<span class="c1">## Get the code for the selected protocol</span>
<span class="n">protocol_code</span> <span class="o">=</span>  <span class="n">protocol</span><span class="o">.</span><span class="n">get_protocol</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span> <span class="n">protocol_code</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<p>In contrast to the Project example, here we only define the <code class="docutils literal notranslate"><span class="pre">projectId</span></code> variable, assuming we already saved the
project’s data &amp; information locally.</p>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>There are actually multiple ways to get the protocol’s name. The names are also used in the dataframe dictionary called
<code class="docutils literal notranslate"><span class="pre">df</span></code> in this examle. To list the names you can also run the following code:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="p">,</span> <span class="n">info</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">download</span><span class="p">(</span> <span class="n">projectId</span><span class="o">=</span><span class="n">projectId</span> <span class="p">)</span>
<span class="hll"><span class="nb">print</span><span class="p">(</span> <span class="n">df</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span> <span class="p">)</span>
</span></pre></div>
</div>
</div>
<section id="protocol-code">
<h3>Protocol Code<a class="headerlink" href="#protocol-code" title="Link to this heading">¶</a></h3>
<p>In the above example the variable <code class="docutils literal notranslate"><span class="pre">protocol_code</span></code> is created to contain the protocol’s code from a project. Instead of
receiving the protocol code from a project, it can also simply be defined in a script.</p>
<div class="literal-block-wrapper docutils container" id="id1">
<div class="code-block-caption"><span class="caption-text"><em>Example:</em> Protocol defined instead of received from project information</span><a class="headerlink" href="#id1" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="n">protocol_code</span> <span class="o">=</span> <span class="p">{</span>
<span class="linenos">2</span>   <span class="c1"># Protocol Instructions</span>
<span class="linenos">3</span><span class="p">}</span>
</pre></div>
</div>
</div>
<p>In the subsequent examples the varibale <code class="docutils literal notranslate"><span class="pre">protocol_code</span></code> will be used to access the diffent components of the protocol
which can be used in the data analysis.</p>
<section id="variable-arrays-v-arrays">
<h4>Variable Arrays (<code class="docutils literal notranslate"><span class="pre">v_arrays</span></code>)<a class="headerlink" href="#variable-arrays-v-arrays" title="Link to this heading">¶</a></h4>
<div class="literal-block-wrapper docutils container" id="protocol-data-tutorial-1">
<div class="code-block-caption"><span class="caption-text">examples/python/protocol-data.py</span><a class="headerlink" href="#protocol-data-tutorial-1" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">## Get the variable array (v_arrays) from a selected protocol</span>
<span class="n">v_arrays</span> <span class="o">=</span> <span class="n">protocol</span><span class="o">.</span><span class="n">get_v_arrays</span><span class="p">(</span><span class="n">protocol_code</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span> <span class="n">v_arrays</span> <span class="p">)</span>
</pre></div>
</div>
</div>
</section>
</section>
<section id="sub-protocols">
<h3>Sub-Protocols<a class="headerlink" href="#sub-protocols" title="Link to this heading">¶</a></h3>
<p>Most more complex protocols are devided up into sub-protocols within the <code class="docutils literal notranslate"><span class="pre">_protocol_sets_</span></code> key of the protocol code. The functions
below allow to access such sub-protocols.</p>
<section id="labels">
<h4>Labels<a class="headerlink" href="#labels" title="Link to this heading">¶</a></h4>
<p>Each sub-protocol can be identified by a label. The function <code class="xref py py-func docutils literal notranslate"><span class="pre">get_subprotocol_labels()</span></code> returns a list of
labels for each sub-protocol. In case a sub-protocol has no <code class="docutils literal notranslate"><span class="pre">label</span></code>, None is returned.</p>
<div class="literal-block-wrapper docutils container" id="protocol-data-tutorial-2">
<div class="code-block-caption"><span class="caption-text"><em>Example:</em> Get sub-protocol labels</span><a class="headerlink" href="#protocol-data-tutorial-2" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">## Get all labels from sub-protocols</span>
<span class="n">labels</span> <span class="o">=</span> <span class="n">protocol</span><span class="o">.</span><span class="n">get_subprotocol_labels</span><span class="p">(</span><span class="n">protocol_code</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span> <span class="n">labels</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="protocol-data-tutorial-output-1">
<div class="code-block-caption"><span class="caption-text"><em>Output:</em> List of sub-protocol labels</span><a class="headerlink" href="#protocol-data-tutorial-output-1" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="s1">&#39;no_leaf_baseline&#39;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;env&#39;</span><span class="p">,</span> <span class="s1">&#39;PIRK&#39;</span><span class="p">,</span> <span class="s1">&#39;PAM&#39;</span><span class="p">,</span> <span class="s1">&#39;spad&#39;</span><span class="p">,</span> <span class="s1">&#39;finish&#39;</span><span class="p">]</span>
</pre></div>
</div>
</div>
</section>
<section id="sub-protocol-by-label">
<h4>Sub-Protocol (by Label)<a class="headerlink" href="#sub-protocol-by-label" title="Link to this heading">¶</a></h4>
<div class="literal-block-wrapper docutils container" id="protocol-data-tutorial-3">
<div class="code-block-caption"><span class="caption-text"><em>Example:</em> Get sub-protocol by label name</span><a class="headerlink" href="#protocol-data-tutorial-3" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">## Get sub-protocols by label</span>
<span class="n">by_label</span> <span class="o">=</span> <span class="n">protocol</span><span class="o">.</span><span class="n">get_subprotocols_by_label</span><span class="p">(</span><span class="n">protocol_code</span><span class="p">,</span> <span class="s2">&quot;PIRK&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span> <span class="n">by_label</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="protocol-data-tutorial-output-2">
<div class="code-block-caption"><span class="caption-text"><em>Output:</em> Sub-protocol as returned by label name</span><a class="headerlink" href="#protocol-data-tutorial-output-2" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;env&#39;</span><span class="p">,</span> 
    <span class="s1">&#39;environmental&#39;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">[</span><span class="s1">&#39;light_intensity&#39;</span><span class="p">],</span> 
      <span class="p">[</span><span class="s1">&#39;temperature_humidity_pressure&#39;</span><span class="p">],</span> 
      <span class="p">[</span><span class="s1">&#39;temperature_humidity_pressure2&#39;</span><span class="p">],</span> 
      <span class="p">[</span><span class="s1">&#39;contactless_temp&#39;</span><span class="p">],</span> 
      <span class="p">[</span><span class="s1">&#39;compass_and_angle&#39;</span><span class="p">]</span>
    <span class="p">],</span> 
    <span class="s1">&#39;autogain&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">50000</span><span class="p">],</span>
        <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">50000</span><span class="p">]</span>
      <span class="p">],</span>
    <span class="s1">&#39;do_once&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;e_time&#39;</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The <code class="xref py py-func docutils literal notranslate"><span class="pre">get_subprotocols_by_label()</span></code> function returns a list with dictionaries.</p>
</div>
</section>
<section id="sub-protocol-by-index">
<h4>Sub-Protocol (by Index)<a class="headerlink" href="#sub-protocol-by-index" title="Link to this heading">¶</a></h4>
<p>The <code class="xref py py-func docutils literal notranslate"><span class="pre">get_subprotocol_by_index()</span></code> function returns a single sub-protocol based on the index position.</p>
<div class="literal-block-wrapper docutils container" id="protocol-data-tutorial-4">
<div class="code-block-caption"><span class="caption-text"><em>Example:</em> Get sub-protocol by index position</span><a class="headerlink" href="#protocol-data-tutorial-4" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">## Get sub-protocols by index</span>
<span class="n">by_index</span> <span class="o">=</span> <span class="n">protocol</span><span class="o">.</span><span class="n">get_subprotocol_by_index</span><span class="p">(</span><span class="n">protocol_code</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span> <span class="n">by_index</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<div class="literal-block-wrapper docutils container" id="protocol-data-tutorial-output-3">
<div class="code-block-caption"><span class="caption-text"><em>Output:</em> Sub-protocol as returned by index</span><a class="headerlink" href="#protocol-data-tutorial-output-3" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="p">[</span>
  <span class="p">{</span><span class="s1">&#39;label&#39;</span><span class="p">:</span> <span class="s1">&#39;env&#39;</span><span class="p">,</span> 
    <span class="s1">&#39;environmental&#39;</span><span class="p">:</span> <span class="p">[</span>
      <span class="p">[</span><span class="s1">&#39;light_intensity&#39;</span><span class="p">],</span> 
      <span class="p">[</span><span class="s1">&#39;temperature_humidity_pressure&#39;</span><span class="p">],</span> 
      <span class="p">[</span><span class="s1">&#39;temperature_humidity_pressure2&#39;</span><span class="p">],</span> 
      <span class="p">[</span><span class="s1">&#39;contactless_temp&#39;</span><span class="p">],</span> 
      <span class="p">[</span><span class="s1">&#39;compass_and_angle&#39;</span><span class="p">]</span>
    <span class="p">],</span> 
    <span class="s1">&#39;autogain&#39;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">50000</span><span class="p">],</span>
        <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="mi">50000</span><span class="p">]</span>
      <span class="p">],</span>
    <span class="s1">&#39;do_once&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="s1">&#39;e_time&#39;</span><span class="p">:</span> <span class="mi">1</span>
  <span class="p">}</span>
<span class="p">]</span>
</pre></div>
</div>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>The <code class="xref py py-func docutils literal notranslate"><span class="pre">get_subprotocol_by_index()</span></code> function returns a dictionary.</p>
</div>
</section>
</section>
</section>
<section id="project-protocol-example">
<h2>Project Protocol Example<a class="headerlink" href="#project-protocol-example" title="Link to this heading">¶</a></h2>
<p>To summarize, this is the full example to get a protocol from the Project’s information and extract different
information from it for an advanced data analysis.</p>
<div class="literal-block-wrapper docutils container" id="protocol-data-tutorial-5">
<div class="code-block-caption"><span class="caption-text">examples/python/protocol-data.py</span><a class="headerlink" href="#protocol-data-tutorial-5" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Working with a Protocol </span>

<span class="sd">Accessing the protocol from the Project Information and</span>
<span class="sd">it&#39;s components which can further assist in the data analysis.</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="kn">import</span> <span class="nn">jii_multispeq.project</span> <span class="k">as</span> <span class="nn">project</span>
<span class="kn">import</span> <span class="nn">jii_multispeq.protocol</span> <span class="k">as</span> <span class="nn">protocol</span>

<span class="n">projectId</span> <span class="o">=</span> <span class="mi">29652</span>

<span class="c1">## Get the project data and information</span>
<span class="n">df</span><span class="p">,</span> <span class="n">info</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">projectId</span><span class="o">=</span><span class="n">projectId</span><span class="p">)</span>

<span class="c1">## Get Protocol Name</span>
<span class="n">protocol_name</span> <span class="o">=</span>  <span class="n">protocol</span><span class="o">.</span><span class="n">get_protocol_name</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">protocol_name</span><span class="p">)</span>

<span class="c1">## Get the code for the selected protocol</span>
<span class="n">protocol_code</span> <span class="o">=</span>  <span class="n">protocol</span><span class="o">.</span><span class="n">get_protocol</span><span class="p">(</span><span class="n">info</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span> <span class="n">protocol_code</span> <span class="p">)</span>

<span class="c1">## Get the variable array (v_arrays) from a selected protocol</span>
<span class="n">v_arrays</span> <span class="o">=</span> <span class="n">protocol</span><span class="o">.</span><span class="n">get_v_arrays</span><span class="p">(</span><span class="n">protocol_code</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span> <span class="n">v_arrays</span> <span class="p">)</span>

<span class="c1">## Get all labels from sub-protocols</span>
<span class="n">labels</span> <span class="o">=</span> <span class="n">protocol</span><span class="o">.</span><span class="n">get_subprotocol_labels</span><span class="p">(</span><span class="n">protocol_code</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span> <span class="n">labels</span> <span class="p">)</span>

<span class="c1">## Get sub-protocols by label</span>
<span class="n">by_label</span> <span class="o">=</span> <span class="n">protocol</span><span class="o">.</span><span class="n">get_subprotocols_by_label</span><span class="p">(</span><span class="n">protocol_code</span><span class="p">,</span> <span class="s2">&quot;PIRK&quot;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span> <span class="n">by_label</span> <span class="p">)</span>

<span class="c1">## Get sub-protocols by index</span>
<span class="n">by_index</span> <span class="o">=</span> <span class="n">protocol</span><span class="o">.</span><span class="n">get_subprotocol_by_index</span><span class="p">(</span><span class="n">protocol_code</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span> <span class="n">by_index</span> <span class="p">)</span>
</pre></div>
</div>
</div>
<p><strong>Download:</strong> <a class="reference download internal" download="" href="_downloads/2a63e182714837e1750c9efa2f7b6da3/protocol-data.py"><code class="xref download docutils literal notranslate"><span class="pre">python</span> <span class="pre">script</span> <span class="pre">[.py]</span></code></a> <a class="reference download internal" download="" href="_downloads/86aab5367ac3ce956310642c555f9538/protocol-data.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Jupyter</span> <span class="pre">Notebook</span> <span class="pre">[.ipynb]</span></code></a></p>
</section>
<section id="local-protocols">
<h2>Local Protocols<a class="headerlink" href="#local-protocols" title="Link to this heading">¶</a></h2>
<p>When using the MultispeQ locally, it can be beneficial, to save the protocol and the accompanying analysis function in a separate file,
instead of copying the protocol into separate script files.</p>
<p>The suggested template contains a header for a detailed description, the protocol code (<code class="docutils literal notranslate"><span class="pre">_protocol</span></code>), the analysis function
(<code class="docutils literal notranslate"><span class="pre">_analyze</span></code>) and an example response from a MultispeQ (<code class="docutils literal notranslate"><span class="pre">_example</span></code>).</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><strong>More Resources</strong></p>
<p>More information on the available protocol commands and structure as well as protocols to use with the MultispeQ are available
with the <a class="reference external" href="https://github.com/Jan-IngenHousz-Institute/JII-MultispeQ-Protocols">JII-MultispeQ-Protocols</a> package and the accompanying
<a class="reference external" href="https://jan-ingenhousz-institute.github.io/JII-MultispeQ-Protocols">Documentation - JII-MultispeQ-Protocols</a>.</p>
</div>
<section id="protocol-file-template">
<h3>Protocol File -  Template<a class="headerlink" href="#protocol-file-template" title="Link to this heading">¶</a></h3>
<div class="literal-block-wrapper docutils container" id="protocol-template">
<div class="code-block-caption"><span class="caption-text">Example file for protocol and analysis code</span><a class="headerlink" href="#protocol-template" title="Link to this code">¶</a></div>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">Protocol Name</span>
<span class="sd">=============</span>

<span class="sd">A detailed protocol description</span>

<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># MultispeQ Protocol</span>
<span class="n">_protocol</span> <span class="o">=</span> <span class="p">[{}]</span>

<span class="c1"># Function to analyze MultispeQ measurement</span>
<span class="k">def</span> <span class="nf">_analyze</span> <span class="p">(</span> <span class="n">data</span> <span class="p">):</span>
<span class="w">  </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">  Analysis of the data returned from the MultispeQ</span>
<span class="sd">  &quot;&quot;&quot;</span>

  <span class="c1"># Define the output dictionary here</span>
  <span class="n">output</span> <span class="o">=</span> <span class="p">{}</span>

  <span class="k">return</span> <span class="n">output</span>

<span class="c1"># Example measurement (from MultispeQ, not analyzed - optional)</span>
<span class="n">_example</span> <span class="o">=</span> <span class="p">[{}]</span>
</pre></div>
</div>
</div>
<p><strong>Download:</strong> <a class="reference download internal" download="" href="_downloads/b68e7000e0aaefd052362fe9664a68ee/template.py"><code class="xref download docutils literal notranslate"><span class="pre">Template</span> <span class="pre">[.py]</span></code></a> - Protocol Template</p>
</section>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="measurements.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">Measurements</div>
              </div>
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="projects.html">
              <svg class="furo-related-icon"><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Online - Projects</div>
                
              </div>
            </a>
        </div>
        <div class="bottom-of-page">
          <div class="left-details">
            <div class="copyright">
                Copyright &#169; 2025 - Jan Ingenhousz Institute
            </div>
            Made with <a href="https://www.sphinx-doc.org/">Sphinx</a> and <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
            
            <a href="https://github.com/pradyunsg/furo">Furo</a>
            
          </div>
          <div class="right-details">
            
          </div>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            On this page
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Protocols</a><ul>
<li><a class="reference internal" href="#multispeq-protocols">MultispeQ Protocols</a><ul>
<li><a class="reference internal" href="#protocol-code">Protocol Code</a><ul>
<li><a class="reference internal" href="#variable-arrays-v-arrays">Variable Arrays (<code class="docutils literal notranslate"><span class="pre">v_arrays</span></code>)</a></li>
</ul>
</li>
<li><a class="reference internal" href="#sub-protocols">Sub-Protocols</a><ul>
<li><a class="reference internal" href="#labels">Labels</a></li>
<li><a class="reference internal" href="#sub-protocol-by-label">Sub-Protocol (by Label)</a></li>
<li><a class="reference internal" href="#sub-protocol-by-index">Sub-Protocol (by Index)</a></li>
</ul>
</li>
</ul>
</li>
<li><a class="reference internal" href="#project-protocol-example">Project Protocol Example</a></li>
<li><a class="reference internal" href="#local-protocols">Local Protocols</a><ul>
<li><a class="reference internal" href="#protocol-file-template">Protocol File -  Template</a></li>
</ul>
</li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script src="_static/documentation_options.js?v=e3a6060d"></script>
    <script src="_static/doctools.js?v=9bcbadda"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/scripts/furo.js?v=5fa4622c"></script>
    </body>
</html>